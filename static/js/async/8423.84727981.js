"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["8423"],{6457:function(e,n,r){r.r(n),r.d(n,{default:()=>h});var i=r(2676),a=r(453);function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",img:"img",h2:"h2",pre:"pre",code:"code",hr:"hr",h3:"h3"},(0,a.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"openstack系统架构设计实战",children:["OpenStack系统架构设计实战",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#openstack系统架构设计实战",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"/OpenStack%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%98_assets/t6_YueWen_834780.jpg",alt:""})}),"\n",(0,i.jsxs)(n.h2,{id:"概述",children:["概述",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#概述",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"OpenStack 是一个开源的云计算管理平台项目，在开源云平台中主题讨论数量最大、社区人数最多、提交代码人数最多的平台。支持几乎所有类型的云环境，项目目标是提供实施简单、可大规模扩展、丰富、标准统一的云计算管理平台。"}),"\n",(0,i.jsx)(n.p,{children:"OpenStack 有几个核心组件组成："}),"\n",(0,i.jsx)(n.p,{children:"计算（Compute）、对象存储（Object Storage）、镜像服务（Image Service）、网络管理（Network）等；"}),"\n",(0,i.jsxs)(n.p,{children:["Github：",(0,i.jsx)(n.a,{href:"https://github.com/openstack",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/openstack"})]}),"\n",(0,i.jsx)(n.p,{children:"OpenStack 的用户界面提供了 Web 界面和 Shell 界面，可以通过界面功能进行创建、维护虚拟机等，操作流程有点像 KVM 管理虚拟机的流程；"}),"\n",(0,i.jsxs)(n.h2,{id:"计算computenova",children:["计算（Compute）Nova",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#计算computenova",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"Nova 是一套控制器，用于为单个用户或使用群组启动虚拟机实力。OpenStack中实例的整个生命周期中的所有行为都有 Nova 处理，Nova 管理计算资源的创建、销毁、挂起、迁移等功能。"}),"\n",(0,i.jsx)(n.p,{children:"但是，Nova自身并不提供任何虚拟化能力，而是使用支持虚拟化（Hypervisor）的 API 来提供。"}),"\n",(0,i.jsx)(n.p,{children:"Nova 可以多节点部署，支持主流的 Hypervisor 架构，比如：KVM、LXC、QEMU、Xen、Docker 等；也能和 VMware 对接；"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"graph TB;\nA[Nova]--\x3enava-api;\nA--\x3eAMQP;\nA--\x3enova-compute\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"nova-api",children:["nova-api",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nova-api",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"是用 Python 实现的 Web 服务器，实现 RESTful API 到内部请求消息的转换，实际使用 WSGI 来实现；"}),"\n",(0,i.jsxs)(n.h3,{id:"消息队列amqp",children:["消息队列（AMQP）",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#消息队列amqp",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"是一个提供统一消息服务的应用层标准高级消息队列协议，基于此协议的客户端和消息中间件可以喘息消息；主要有 2 个组件：Exchange 和 Queue；"}),"\n",(0,i.jsxs)(n.h3,{id:"nova-compute",children:["nova-compute",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nova-compute",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"负责管理虚拟机，单独运行于承载分配虚拟机的主机智商，通过消息队列获取任务然后执行。走的是 qemu 那套虚拟化方案；"}),"\n",(0,i.jsxs)(n.h2,{id:"存储管理cinder",children:["存储管理（Cinder）",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#存储管理cinder",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"Cinder 是在虚拟机和具体的存储设备之间引入一个抽象的 “逻辑存储卷”，整合后端存储设备，并通过统一的 API 接口为云平台提供持久性的块设备存储服务。"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"graph TB;\nA[Cinder]--\x3eB[Cinder API];\nA--\x3ecinder-scheduler;\nA--\x3ecinder-volume;\nA--\x3ecinder-backup;\nA--\x3eGlance;\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"cinder-api",children:["Cinder API",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cinder-api",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"接受客户端发来的HTTP请求，然后进行用户身份认证和消息分发，本质上是一个 WSGI 服务；"}),"\n",(0,i.jsxs)(n.h3,{id:"cinder-scheduler",children:["cinder-scheduler",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cinder-scheduler",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"Cinder 的调度器，主要功能是通过一定的调度算法选择合适的后端存储节点，用来放置新创建的卷；"}),"\n",(0,i.jsxs)(n.h3,{id:"cinder-volume",children:["cinder-volume",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cinder-volume",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"运行在存储节点，用于管理存储空间，主要执行卷管理相关的功能，比如：创建、删除、挂载、卸载、生成快照等。"}),"\n",(0,i.jsxs)(n.h3,{id:"cinder-backup",children:["cinder-backup",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cinder-backup",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"用于将 cinder 卷备份到其他存储系统上去；"}),"\n",(0,i.jsxs)(n.h3,{id:"glance",children:["Glance",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#glance",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"提供虚拟机镜像存储和管理服务，比如虚拟机镜像的查询、注册、传输等；"}),"\n",(0,i.jsx)(n.p,{children:"Glance 是存储服务和 OpenStack 其他组件之间沟通的纽带；"}),"\n",(0,i.jsxs)(n.h2,{id:"网络管理neutron",children:["网络管理（Neutron）",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#网络管理neutron",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"网络管理可太重要了，以前是由各个 nova 自己做的，现在 OpenStack 将这块独立出来，进行统一管理；也是 OpenStack 后续发力的重点；"}),"\n",(0,i.jsx)(n.p,{children:"Neutron 提供了灵活的网络模型、管理IP地址，用户可以创建自己的网络，控制流量，可扩展，实现高级别的多租户、大规模部署网络；"}),"\n",(0,i.jsx)(n.p,{children:"Neutron定位于网络服务，主要实现网络能力的集成、开放和管理，而网络能力的具体实现必须借助于外部的网络功能实体，如SDN控制器，交换机等。"}),"\n",(0,i.jsx)(n.p,{children:"主要功能特点如下："}),"\n",(0,i.jsx)(n.p,{children:"1）支持创建各种类型网络，如Flat、VLAN、GRE，并可为租户创建自己的业务网络结构，如Web层、应用层、数据层。"}),"\n",(0,i.jsx)(n.p,{children:"2）可为租户插入各种网络服务，如防火墙、负载均衡、IPS、NAT等。"}),"\n",(0,i.jsx)(n.p,{children:"3）主流网络设备厂家都提供了插件以便支持对网络的控制和管理（包括SDN控制器）。"}),"\n",(0,i.jsx)(n.p,{children:"4）支持各种网络虚拟化技术，如VXLAN、NVGRE、VLAN等。"}),"\n",(0,i.jsxs)(n.h2,{id:"计量于监控ceilometer",children:["计量于监控（Ceilometer）",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#计量于监控ceilometer",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"获取系统中用户对各种资源的使用情况，确保资源处于健康状态；"}),"\n",(0,i.jsx)(n.p,{children:"Ceilometer 获取计量数据的三种方法：通知、轮询、RESTful API；"}),"\n",(0,i.jsx)(n.p,{children:"测量数据通过 Pipeline 发布，Ceilometer 中的 collector 服务用来接受这些测量数据，并持久化到存储介质中；"}),"\n",(0,i.jsx)(n.p,{children:"可以对阈值做告警：边界触发器、组合型；"}),"\n",(0,i.jsxs)(n.h2,{id:"裸机管理ironic",children:["裸机管理（Ironic）",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#裸机管理ironic",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"通过 PXE 等裸机管理软件能方便的控制裸机上电，然后通过网络进行操作系统的安装；"}),"\n",(0,i.jsx)(n.p,{children:"提供了一些功能可以进行自动化装机；"}),"\n",(0,i.jsxs)(n.h2,{id:"其他",children:["其他",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#其他",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"其他还提供了一些如：大数据服务（Sahara）、数据库服务（Trove）等服务；"})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}let h=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["blog%2F2024%2FOpenStack%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%AE%9E%E6%88%98.md"]={toc:[{text:"概述",id:"概述",depth:2},{text:"计算（Compute）Nova",id:"计算computenova",depth:2},{text:"nova-api",id:"nova-api",depth:3},{text:"消息队列（AMQP）",id:"消息队列amqp",depth:3},{text:"nova-compute",id:"nova-compute",depth:3},{text:"存储管理（Cinder）",id:"存储管理cinder",depth:2},{text:"Cinder API",id:"cinder-api",depth:3},{text:"cinder-scheduler",id:"cinder-scheduler",depth:3},{text:"cinder-volume",id:"cinder-volume",depth:3},{text:"cinder-backup",id:"cinder-backup",depth:3},{text:"Glance",id:"glance",depth:3},{text:"网络管理（Neutron）",id:"网络管理neutron",depth:2},{text:"计量于监控（Ceilometer）",id:"计量于监控ceilometer",depth:2},{text:"裸机管理（Ironic）",id:"裸机管理ironic",depth:2},{text:"其他",id:"其他",depth:2}],title:"OpenStack系统架构设计实战",headingTitle:"OpenStack系统架构设计实战",frontmatter:{Author:"mikigo"}}}}]);