"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["2048"],{7602:function(n,e,r){r.r(e),r.d(e,{default:()=>t});var i=r(2676),s=r(453);function a(n){let e=Object.assign({h1:"h1",a:"a",p:"p",img:"img",pre:"pre",code:"code"},(0,s.ah)(),n.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h1,{id:"wayland下sniff命令报错xauthorty文件不存在",children:["Wayland下sniff命令报错~/.Xauthorty文件不存在",(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#wayland下sniff命令报错xauthorty文件不存在",children:"#"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"/faq/sniff_error.png",alt:""})}),"\n",(0,i.jsx)(e.p,{children:"根据 Xlib.xauth 源代码里面这里："}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"class Xauthority:\n    def __init__(self, filename = None):\n        if filename is None:\n            filename = os.environ.get('XAUTHORITY')\n\n        if filename is None:\n            try:\n                filename = os.path.join(os.environ['HOME'], '.Xauthority')\n            except KeyError:\n                raise error.XauthError(\n                    '$HOME not set, cannot find ~/.Xauthority')\n\n        try:\n            raw = open(filename, 'rb').read()\n        except OSError as err:\n            raise error.XauthError('~/.Xauthority: %s' % err)\n\n        self.entries = []\n"})}),"\n",(0,i.jsxs)(e.p,{children:["是因为读文件 ",(0,i.jsx)(e.code,{children:"filename"})," 的时候报错，",(0,i.jsx)(e.code,{children:"filename"})," 要么从环境变量 ",(0,i.jsx)(e.code,{children:"XAUTHORITY"})," 里面拿，要么就赋值 ",(0,i.jsx)(e.code,{children:"~/.Xauthority"}),"，而咱们系统中 ",(0,i.jsx)(e.code,{children:"~/.Xauthority"})," 文件是存在的，那么肯定就是环境变量里面 ",(0,i.jsx)(e.code,{children:"XAUTHORITY"})," 的值有问题；\n查看一下："]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"/faq/sniff_error2.png",alt:""})}),"\n",(0,i.jsxs)(e.p,{children:["环境变量里面有 ",(0,i.jsx)(e.code,{children:"XAUTHORITY"}),"，但是值为空；"]}),"\n",(0,i.jsxs)(e.p,{children:["所以这就是问题，",(0,i.jsx)(e.code,{children:"filename"})," 拿到一个空串，",(0,i.jsx)(e.code,{children:"open"})," 读肯定会报 ",(0,i.jsx)(e.code,{children:"OSError"}),"；"]}),"\n",(0,i.jsxs)(e.p,{children:["解决方法，在 ",(0,i.jsx)(e.code,{children:"sniff"})," 的代码里面把 ",(0,i.jsx)(e.code,{children:"XAUTHORITY=~/.Xauthority"})," 这个环境变量加上理论上就行了；"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'import os\nos.environ["XAUTHORITY"] = "$HOME/.Xauthority"\n'})}),"\n",(0,i.jsxs)(e.p,{children:["再执行 ",(0,i.jsx)(e.code,{children:"sniff"})," 就不会报错啦；"]})]})}function o(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(a,{...n})}):a(n)}let t=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["blog%2F2024%2FWayland%E4%B8%8Bsniff%E6%8A%A5%E9%94%99.md"]={toc:[],title:"Wayland下sniff命令报错~/.Xauthorty文件不存在",headingTitle:"Wayland下sniff命令报错~/.Xauthorty文件不存在",frontmatter:{Author:"mikigo"}}}}]);