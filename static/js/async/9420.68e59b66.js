"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["9420"],{8337:function(e,n,s){s.r(n),s.d(n,{default:()=>t});var d=s(2676),a=s(453);function r(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",pre:"pre",code:"code",p:"p",blockquote:"blockquote"},(0,a.ah)(),e.components);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.h1,{id:"ftp服务搭建",children:["FTP服务搭建",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ftp服务搭建",children:"#"})]}),"\n",(0,d.jsxs)(n.h2,{id:"安装",children:["安装",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo apt install vsftpd\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"配置用户",children:["配置用户",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置用户",children:"#"})]}),"\n",(0,d.jsx)(n.p,{children:"添加用户组"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo groupadd ftpgroup\n"})}),"\n",(0,d.jsxs)(n.p,{children:["配置 ",(0,d.jsx)(n.code,{children:"FTP"})," 访问用户 ",(0,d.jsx)(n.code,{children:"uos"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo useradd -g ftpgroup -M -s /bin/bash uos\n"})}),"\n",(0,d.jsxs)(n.p,{children:["配置 ",(0,d.jsx)(n.code,{children:"FTP"})," 访问密码"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo passwd uos\n"})}),"\n",(0,d.jsx)(n.p,{children:"之后输入 2 次密码即可；"}),"\n",(0,d.jsxs)(n.h2,{id:"修改配置项",children:["修改配置项",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#修改配置项",children:"#"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo vim /etc/vsftpd.conf\n"})}),"\n",(0,d.jsx)(n.p,{children:"配置以下内容："}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"# 文件编码\nutf8_filesystem=YES\n\n# 开启匿名访问\nanonymous_enable=YES\n# 匿名用户无密码\nno_anon_password=YES\n# 匿名上传\nanon_upload_enable=YES\n# 匿名可写文件夹\nanon_mkdir_write_enable=YES\n# 其他用户匿名可写\nanon_other_write_enable=YES\n# 限定匿名用户目录，路径可以自定义\nanon_root=/home/$USER/ftp\n# 匿名用户创建文件时所得到的初始权限\n# 022 新建的目录权限为755，新建的文件权限为644\nanon_umask=022\n\n# 可写\nwrite_enable=YES\n\n\n# 本地用户\nchroot_local_user=YES\n\n# 用户列表\nchroot_list_enable=YES\n\n# 用户列表文件\nchroot_list_file=/etc/vsftpd.chroot_list\n\n# 权限用户目录，路径可以自定义\nlocal_root=/ftp/ftp\n"})}),"\n",(0,d.jsx)(n.p,{children:"配置用户列表文件："}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo vim /etc/vsftpd.chroot_list\n"})}),"\n",(0,d.jsx)(n.p,{children:"写入"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:"uos"}),"\n"]}),"\n",(0,d.jsxs)(n.h2,{id:"创建ftp目录",children:["创建FTP目录",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#创建ftp目录",children:"#"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo mkdir -p /ftp/ftp # 权限访问目录\nsudo mkdir -p /home/$USER/ftp # 匿名访问目录\n"})}),"\n",(0,d.jsx)(n.p,{children:"修改目录权限"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo chmod -R 777 /ftp/ftp\nsudo chmod -R 777 /home/$USER/ftp\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"重启服务",children:["重启服务",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#重启服务",children:"#"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo systemctl restart vsftpd.service\nsudo systemctl status vsftpd.service\n"})}),"\n",(0,d.jsxs)(n.h2,{id:"一键部署脚本",children:["一键部署脚本",(0,d.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#一键部署脚本",children:"#"})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo apt update\nsudo apt install vsftpd\n# ========== 匿名 =====================\nsudo sed -ri '/anonymous_enable/d' /etc/vsftpd.conf\nsudo sed -ri '/no_anon_password/d' /etc/vsftpd.conf\nsudo sed -ri '/write_enable/d' /etc/vsftpd.conf\nsudo sed -ri '/anon_upload_enable/d' /etc/vsftpd.conf\nsudo sed -ri '/anon_mkdir_write_enable/d' /etc/vsftpd.conf\nsudo sed -ri '/anon_umask/d' /etc/vsftpd.conf\nsudo sed -ri '/anon_root/d' /etc/vsftpd.conf\nsudo sed -ri \"/listen_ipv6/aanonymous_enable=YES\\nno_anon_password=YES\\nanon_root=/srv/ftp/\\nwrite_enable=YES\\nanon_upload_enable=YES\\nanon_mkdir_write_enable=YES\\nanon_other_write_enable=YES\\nanon_umask=022\" /etc/vsftpd.conf\nsudo sed -ri '/utf8_filesystem/cutf8_filesystem=YES' /etc/vsftpd.conf\n# 创建uploads目录，增加写权限\nsudo mkdir -p /srv/ftp/uploads\nsudo chown ftp:ftp /srv/ftp/uploads\nsudo chmod a+rwx /srv/ftp/uploads\nsudo systemctl restart vsftpd.service\n\n# ========================= sftp ==========================\nsudo groupadd ftpgroup \nsudo useradd -g ftpgroup -M -s /bin/bash uos    # <-- ftp用户名\nsudo passwd uos # 输入ftp用户密码\nsudo mkdir -p /ftp/ftp/uploads\nsudo usermod -d /ftp/ftp uos\nsudo chown root:ftpgroup /ftp/ftp\nsudo chmod -R 755 /ftp/ftp\nsudo chown uos:ftpgroup /ftp/ftp/uploads\nsudo systemctl restart vsftpd.service\n"})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(r,{...e})}):r(e)}let t=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["program%2FLinux%2FFTP%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA.md"]={toc:[{text:"安装",id:"安装",depth:2},{text:"配置用户",id:"配置用户",depth:2},{text:"修改配置项",id:"修改配置项",depth:2},{text:"创建FTP目录",id:"创建ftp目录",depth:2},{text:"重启服务",id:"重启服务",depth:2},{text:"一键部署脚本",id:"一键部署脚本",depth:2}],title:"FTP服务搭建",headingTitle:"FTP服务搭建",frontmatter:{Author:"mikigo"}}}}]);