"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["7007"],{1098:function(e,n,s){s.r(n),s.d(n,{default:()=>h});var r=s(2676),c=s(453);function d(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",h3:"h3",pre:"pre",code:"code",p:"p",img:"img"},(0,c.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"docker入门",children:["Docker入门",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#docker入门",children:"#"})]}),"\n",(0,r.jsxs)(n.h2,{id:"安装",children:["安装",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"官方仓库安装",children:["官方仓库安装",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#官方仓库安装",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'# 更新软件包索引并安装软件包以允许使用 基于 HTTPS 的存储库\nsudo apt update\nsudo apt-get install ca-certificates curl gnupg\n# 添加 Docker 的官方 GPG 密钥\nsudo install -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n# 使用以下命令设置存储库\necho \\\n  "deb [arch="$(dpkg --print-architecture)" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  "$(. /etc/os-release && echo "$VERSION_CODENAME")" stable" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\n# 安装 Docker 引擎\nsudo apt update\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"阿里云镜像安装",children:["阿里云镜像安装",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#阿里云镜像安装",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'# step 1: 安装必要的一些系统工具\nsudo apt-get update\nsudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common\n# step 2: 安装GPG证书\ncurl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n# Step 3: 写入软件源信息\nsudo add-apt-repository "deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"\n# Step 4: 更新并安装Docker-CE\nsudo apt-get -y update\nsudo apt-get -y install docker-ce\n\n# 安装指定版本的Docker-CE:\n# Step 1: 查找Docker-CE的版本:\n# apt-cache madison docker-ce\n#   docker-ce | 17.03.1~ce-0~ubuntu-xenial | https://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages\n#   docker-ce | 17.03.0~ce-0~ubuntu-xenial | https://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages\n# Step 2: 安装指定版本的Docker-CE: (VERSION例如上面的17.03.1~ce-0~ubuntu-xenial)\n# sudo apt-get -y install docker-ce=[VERSION]\n'})}),"\n",(0,r.jsx)(n.p,{children:"安装完之后校验："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo docker run hello-world\n"})}),"\n",(0,r.jsx)(n.p,{children:"看到这样的输出就说明没问题："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'Hello from Docker!\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.\n    (amd64)\n 3. The Docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, which sent it\n    to your terminal.\n\nTo try something more ambitious, you can run an Ubuntu container with:\n $ docker run -it ubuntu bash\n\nShare images, automate workflows, and more with a free Docker ID:\n https://hub.docker.com/\n\nFor more examples and ideas, visit:\n https://docs.docker.com/get-started/\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"基本使用",children:["基本使用",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#基本使用",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"拉取python镜像",children:["拉取Python镜像",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#拉取python镜像",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo docker pull python:3.11\n"})}),"\n",(0,r.jsx)(n.p,{children:"输出："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"3.11: Pulling from library/python\nd52e4f012db1: Pull complete \n7dd206bea61f: Pull complete \n2320f9be4a9c: Pull complete \n6e5565e0ba8d: Pull complete \nd3797e13cc41: Pull complete \n70f90dfe001b: Pull complete \nbd75605de417: Pull complete \n3d0e1a4b14bc: Pull complete \nDigest: sha256:d73088ce13d5a1eec1dd05b47736041ae6921d08d2f240035d99642db98bc8d4\nStatus: Downloaded newer image for python:3.11\ndocker.io/library/python:3.11\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"查看当前所有镜像",children:["查看当前所有镜像",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#查看当前所有镜像",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo docker images\n"})}),"\n",(0,r.jsx)(n.p,{children:"输出："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ sudo docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npython              3.11                c0e63845ae98        4 weeks ago         1.01GB\nhello-world         latest              9c7a54a9a43c        2 months ago        13.3kB\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"创建并进入容器",children:["创建并进入容器",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#创建并进入容器",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo docker run -it --name python311 python:3.11 /bin/bash\n"})}),"\n",(0,r.jsxs)(n.p,{children:["给容器取个名字：",(0,r.jsx)(n.code,{children:"--name python311"})," ，名字可以自定义；"]}),"\n",(0,r.jsx)(n.p,{children:"输出："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo docker run -it --name python311 python:3.11 /bin/bash\nroot@627d0744c2d5:/#\n"})}),"\n",(0,r.jsx)(n.p,{children:"查看下容器的系统环境："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# 查询容器系统的环境\nroot@627d0744c2d5:/# cat /etc/os-release \nPRETTY_NAME="Debian GNU/Linux 12 (bookworm)"\nNAME="Debian GNU/Linux"\nVERSION_ID="12"\nVERSION="12 (bookworm)"\nVERSION_CODENAME=bookworm\nID=debian\nHOME_URL="https://www.debian.org/"\nSUPPORT_URL="https://www.debian.org/support"\nBUG_REPORT_URL="https://bugs.debian.org/"\n\n# 查询Python的环境\nroot@627d0744c2d5:/# python --version\nPython 3.11.4\nroot@627d0744c2d5:/# pip3 list\nPackage    Version\n---------- -------\npip        23.1.2\nsetuptools 65.5.1\nwheel      0.40.0\n'})}),"\n",(0,r.jsxs)(n.p,{children:["可以看出来，我们从 ",(0,r.jsx)(n.code,{children:"Docker"})," 官方拉取的Python镜像是基于 ",(0,r.jsx)(n.code,{children:"Debian 12"})," 构建的，",(0,r.jsx)(n.code,{children:"Python"})," 版本为：",(0,r.jsx)(n.code,{children:"3.11.4"})]}),"\n",(0,r.jsxs)(n.p,{children:["这里是进入交互模式，使用 ",(0,r.jsx)(n.code,{children:"exit"})," 退出之后，容器就停了。"]}),"\n",(0,r.jsxs)(n.h3,{id:"查看当前所有容器",children:["查看当前所有容器",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#查看当前所有容器",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo docker ps -a\n"})}),"\n",(0,r.jsx)(n.p,{children:"这里主要输出：容器ID、镜像名称、创建时间、状态、容器名称"}),"\n",(0,r.jsxs)(n.h3,{id:"启动容器",children:["启动容器",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#启动容器",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo docker start 容器名/容器id\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ sudo docker start python311\npython311\n"})}),"\n",(0,r.jsxs)(n.p,{children:["表示此容器已经启动了，你可以使用 ",(0,r.jsx)(n.code,{children:"sudo docker ps -a"})," 查看一下“状态”；"]}),"\n",(0,r.jsxs)(n.h3,{id:"进入容器",children:["进入容器",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#进入容器",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"启动之后才能进入容器；"}),"\n",(0,r.jsx)(n.p,{children:"1、docker attach"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo docker attach 容器名/容器id\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ sudo docker attach python311\nroot@9b4b3dc24c32:/#\n"})}),"\n",(0,r.jsx)(n.p,{children:"使用 exit 退出容器，容器会停止；"}),"\n",(0,r.jsx)(n.p,{children:"2、docker exec"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo docker exec -it 容器名/容器id /bin/bash\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"$ sudo docker exec -it python311 /bin/bash\nroot@9b4b3dc24c32:/#\n"})}),"\n",(0,r.jsx)(n.p,{children:"注意，使用 exit 退出容器，容器不会停止；"}),"\n",(0,r.jsxs)(n.h3,{id:"删除容器",children:["删除容器",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#删除容器",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo docker rm 容器名/镜像名\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"pycharm-配置-docker-容器内-python-环境",children:["Pycharm 配置 Docker 容器内 Python 环境",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#pycharm-配置-docker-容器内-python-环境",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"1ssh-方式指定远程",children:["1、ssh 方式指定远程",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1ssh-方式指定远程",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"这种方式需要在容器里面安装 ssh 服务"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# 安装sudo\napt-get install sudo\n# 启动SSH服务\nsudo apt-get install openssh-server\nsudo /etc/init.d/ssh start\n# 查看SSH服务的状态\nsudo service ssh status\n# 设置root密码\npasswd root\n"})}),"\n",(0,r.jsx)(n.p,{children:"配置文件"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"vim /etc/ssh/sshd_config\n"})}),"\n",(0,r.jsx)(n.p,{children:"增加以下内容："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"#启用 RSA 认证\nRSAAuthentication yes \n#启用公钥私钥配对认证方式\nPubkeyAuthentication yes \n#公钥文件路径（和上面生成的文件同）\nAuthorizedKeysFile .ssh/authorized_keys \n#root能使用ssh登录\nPermitRootLogin yes \n"})}),"\n",(0,r.jsx)(n.p,{children:"重启SSH"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"service ssh restart\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"2tcp-连接",children:["2、TCP 连接",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2tcp-连接",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"首先，配置文件："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo vim /etc/docker/daemon.json\n"})}),"\n",(0,r.jsx)(n.p,{children:"写入："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'{\n  "hosts": ["tcp://0.0.0.0:2375","unix:///var/run/docker.sock"]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"然后，修改配置文件："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo vim /etc/systemd/system/docker.service\n"})}),"\n",(0,r.jsxs)(n.p,{children:["这到 ",(0,r.jsx)(n.code,{children:"ExecStart"}),"，改成："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"[Service]\n\nExecStart=/usr/bin/dockerd\n"})}),"\n",(0,r.jsx)(n.p,{children:"最后重启服务："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo systemctl daemon-reload\nsudo systemctl restart docker.service\n"})}),"\n",(0,r.jsxs)(n.p,{children:["在 ",(0,r.jsx)(n.code,{children:"Pycharm"})," 添加解释器界面："]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"/docker/1.jpg",alt:""})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"/docker/2.jpg",alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["输入：",(0,r.jsx)(n.code,{children:"tcp://0.0.0.0:2375"})]}),"\n",(0,r.jsx)(n.p,{children:"点【OK】就行了。"})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,c.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}let h=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["program%2FLinux%2FDocker%E5%85%A5%E9%97%A8.md"]={toc:[{text:"安装",id:"安装",depth:2},{text:"官方仓库安装",id:"官方仓库安装",depth:3},{text:"阿里云镜像安装",id:"阿里云镜像安装",depth:3},{text:"基本使用",id:"基本使用",depth:2},{text:"拉取Python镜像",id:"拉取python镜像",depth:3},{text:"查看当前所有镜像",id:"查看当前所有镜像",depth:3},{text:"创建并进入容器",id:"创建并进入容器",depth:3},{text:"查看当前所有容器",id:"查看当前所有容器",depth:3},{text:"启动容器",id:"启动容器",depth:3},{text:"进入容器",id:"进入容器",depth:3},{text:"删除容器",id:"删除容器",depth:3},{text:"Pycharm 配置 Docker 容器内 Python 环境",id:"pycharm-配置-docker-容器内-python-环境",depth:2},{text:"1、ssh 方式指定远程",id:"1ssh-方式指定远程",depth:3},{text:"2、TCP 连接",id:"2tcp-连接",depth:3}],title:"Docker入门",headingTitle:"Docker入门",frontmatter:{Author:"mikigo"}}}}]);