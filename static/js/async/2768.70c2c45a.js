"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["2768"],{8519:function(e,s,n){n.r(s),n.d(s,{default:()=>d});var r=n(2676),t=n(453);function o(e){let s=Object.assign({h1:"h1",a:"a",h2:"h2",code:"code",p:"p",pre:"pre",strong:"strong"},(0,t.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"前端问题",children:["前端问题",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#前端问题",children:"#"})]}),"\n",(0,r.jsxs)(s.h2,{id:"1-error-enospc-system-limit-for-number-of-file-watchers-reached",children:["1. ",(0,r.jsx)(s.code,{children:"Error: ENOSPC: System limit for number of file watchers reached"}),(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#1-error-enospc-system-limit-for-number-of-file-watchers-reached",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"报错的原始输出："}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"node:internal/errors:490\n    ErrorCaptureStackTrace(err);\n    ^\n\nError: ENOSPC: System limit for number of file watchers reached, watch '/home/uos/github/muyi-frontend/.env.development'\n    at FSWatcher.<computed> (node:internal/fs/watchers:247:19)\n    at Object.watch (node:fs:2343:34)\n    at createFsWatchInstance (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50470:17)\n    at setFsWatchListener (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50517:15)\n    at NodeFsHandler._watchWithNodeFs (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50672:14)\n    at NodeFsHandler._handleFile (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50736:23)\n    at NodeFsHandler._addToNodeFs (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50978:21)\nEmitted 'error' event on FSWatcher instance at:\n    at FSWatcher._handleError (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:52169:10)\n    at NodeFsHandler._addToNodeFs (file:///home/uos/github/muyi-frontend/node_modules/.pnpm/vite@4.3.9_@types+node@20.3.1_sass@1.63.6_terser@5.18.1/node_modules/vite/dist/node/chunks/dep-e8f070e8.js:50986:18) {\n  errno: -28,\n  syscall: 'watch',\n  code: 'ENOSPC',\n  path: '/home/uos/github/muyi-frontend/.env.development',\n  filename: '/home/uos/github/muyi-frontend/.env.development'\n}\n\n"})}),"\n",(0,r.jsx)(s.p,{children:"达到文件观察者数量的系统限制；"}),"\n",(0,r.jsxs)(s.p,{children:["错误产生的原因是负责监控 Linux 文件系统的 ",(0,r.jsx)(s.code,{children:"inotify"})," 程序达到了系统默认的限制上限；"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"inotify"})," 提供了一种监控文件系统（基于 ",(0,r.jsx)(s.code,{children:"inode"})," 的）事件的机制，可以监控文件系统的变化如文件修改、新增、删除等，并可以将相应的事件通知给应用程序。"]}),"\n",(0,r.jsxs)(s.p,{children:["查看 ",(0,r.jsx)(s.code,{children:"inotify"})," 在内核中的默认配置"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"uos@uos-PC:~$ sudo sysctl fs.inotify\nfs.inotify.max_queued_events = 16384\nfs.inotify.max_user_instances = 128\nfs.inotify.max_user_watches = 8192\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"解决方法"})}),"\n",(0,r.jsx)(s.p,{children:"临时解决："}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"sudo sysctl fs.inotify.max_user_watches=100000\n"})}),"\n",(0,r.jsx)(s.p,{children:"永久解决："}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"echo fs.inotify.max_user_watches=100000 | sudo tee -a /etc/sysctl.conf\nsudo sysctl -p\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"2-warn-get-httpsregistrynpmtaobaoorgvitepress-error-cert_has_expired-will-retry-in-10-seconds-2-retries-left",children:["2. ",(0,r.jsx)(s.code,{children:"WARN  GET https://registry.npm.taobao.org/vitepress error (CERT_HAS_EXPIRED). Will retry in 10 seconds. 2 retries left."}),(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#2-warn-get-httpsregistrynpmtaobaoorgvitepress-error-cert_has_expired-will-retry-in-10-seconds-2-retries-left",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"原因是npm淘宝的镜像 https 过期，取消掉严格https验证"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"npm cache clean --force\nnpm config set strict-ssl false\n"})})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,t.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}let d=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["blog%2F2024%2F%E5%89%8D%E7%AB%AF%E9%97%AE%E9%A2%98.md"]={toc:[{text:"1. `Error: ENOSPC: System limit for number of file watchers reached`",id:"1-error-enospc-system-limit-for-number-of-file-watchers-reached",depth:2},{text:"2. `WARN  GET https://registry.npm.taobao.org/vitepress error (CERT_HAS_EXPIRED). Will retry in 10 seconds. 2 retries left.`",id:"2-warn-get-httpsregistrynpmtaobaoorgvitepress-error-cert_has_expired-will-retry-in-10-seconds-2-retries-left",depth:2}],title:"前端问题",headingTitle:"前端问题",frontmatter:{Author:"mikigo"}}}}]);